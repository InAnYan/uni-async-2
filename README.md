# Звіт з виконання Лабораторної роботи №2 з дисципліни 1-123-5

**Дисципліна**: Асинхронне і багатопотокове програмування.

**Роботу виконав**: Попов Руслан Олександрович, гр. КІ-23-1.

## Умови

Розробіть багатопотокову програму, яка виконує обчислення добутку матриць **A** (m×n) та **B** (n×k).  
Елементи цієї матриці добутку **C = A×B** обчислюються паралельно розміром пулу потоків одночасними потоками.

- Якщо деякий потік вже обчислює елемент **C[jj]** матриці **C**, наступний потік, що приступає до обчислення, вибирає для розрахунку елемент **C[j+1][k]**, якщо **j < k**, і **C[i+1][k]**, якщо **j = k**.
- Виконання обчислення елемента матриці-добутку потік перевіряє, чи немає елемента, який ще не розрахований. Якщо такий елемент є, то потік починає його розрахунок.
- В іншому випадку передбачте користувачу повідомлення про завершення своєї роботи за умови її виконання.
- Головний потік, отримавши повідомлення про завершення обчислень всіх потоків, виводить результат на екран.
- Вивід на екран матриці добутку виконуйте форматовано.

Виконайте це завдання за допомогою одного з традиційних пулів потоків і за допомогою **VirtualThreads**.

Використайте **VirtualThreads** у двох варіантах:

1. **Без обмеження кількості віртуальних потоків.**
2. **З обмеженням кількості віртуальних потоків** до кількості традиційних kernel потоків, які ви використовували на першому етапі роботи, за допомогою **Semaphore**.

Приклад використання семафору:  
[Документація Oracle](https://docs.oracle.com/en/java/javase/21/core/virtual-threads.html#GUID-E695A4C5-D335-4FA4-B886-FE88C73F23E)

Порівняйте швидкодію в обох випадках при роботі з великими матрицями за допомогою фреймворка **JMH**.

## Результати

| Pool Kinds                    |   Square matrix size |   Threads |   Tests Count |   Time of one operation (ms) |
|:------------------------------|---------------------:|----------:|--------------:|-----------------------------:|
| Classic Fixed Pool            |                   10 |         4 |            20 |                        0.786 |
| Classic Fixed Pool            |                   10 |        10 |            20 |                        1.321 |
| Classic Fixed Pool            |                  100 |         4 |            20 |                        1.507 |
| Classic Fixed Pool            |                  100 |        10 |            20 |                        2.239 |
| Limited `VirtualThreads` Pool |                   10 |         4 |            20 |                        0.279 |
| Limited `VirtualThreads` Pool |                   10 |        10 |            20 |                        0.266 |
| Limited `VirtualThreads` Pool |                  100 |         4 |            20 |                       78.686 |
| Limited `VirtualThreads` Pool |                  100 |        10 |            20 |                       90.931 |
| Unbound `VirtualThreads`      |                   10 |         4 |            20 |                        0.245 |
| Unbound `VirtualThreads`      |                   10 |        10 |            20 |                        0.339 |
| Unbound `VirtualThreads`      |                  100 |         4 |            20 |                       78.071 |
| Unbound `VirtualThreads`      |                  100 |        10 |            20 |                       89.242 |